"use strict";(self.webpackChunktest_website=self.webpackChunktest_website||[]).push([[7741],{34438:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"tips/sh_script_to_local_build","title":"local build \u7528 bash script","description":"\u4ee5\u4e0b\u306f\u4e07\u4eba\u5411\u3051\u306e\u89e3\u8aac\u3067\u306f\u306a\u304f\u3001\u79c1\u7684\u306a\u5fd8\u5099\u9332\u3002","source":"@site/docs/tips/sh_script_to_local_build.md","sourceDirName":"tips","slug":"/tips/sh_script_to_local_build","permalink":"/ds/tips/sh_script_to_local_build","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mySidebar","previous":{"title":"PyQt \u3067\u4f5c\u6210\u3057\u305f GUI \u30c4\u30fc\u30eb\u3092 CLaunch \u3067\u8d77\u52d5\u3059\u308b\u65b9\u6cd5","permalink":"/ds/tips/how_to_register_qt_tools_claunch"},"next":{"title":"GitHub \u306b deploy \u3059\u308b\u305f\u3081\u306e bash script","permalink":"/ds/tips/sh_script_to_deploy_github"}}');var t=r(74848),s=r(28453);const l={},c="local build \u7528 bash script",o={},d=[{value:"local build \u306e\u624b\u9806",id:"local-build-\u306e\u624b\u9806",level:2},{value:"local build \u7528 bash script",id:"local-build-\u7528-bash-script-1",level:2},{value:"\u5c65\u6b74",id:"\u5c65\u6b74",level:2}];function a(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"local-build-\u7528-bash-script",children:"local build \u7528 bash script"})}),"\n",(0,t.jsxs)(e.admonition,{title:"\u6ce8\u610f",type:"info",children:[(0,t.jsx)(e.p,{children:"\u4ee5\u4e0b\u306f\u4e07\u4eba\u5411\u3051\u306e\u89e3\u8aac\u3067\u306f\u306a\u304f\u3001\u79c1\u7684\u306a\u5fd8\u5099\u9332\u3002\r\n\u74b0\u5883\u306f Windows11 + miniconda"}),(0,t.jsx)(e.p,{children:"GitHub \u3067 Docusaurus \u5c02\u7528\u306e repository \u3092\u4f5c\u6210\u3057\u3001Pages \u306e\u8a2d\u5b9a\u3092\u65e2\u306b\u6e08\u307e\u305b\u3066\u3044\u308b\u3082\u306e\u3068\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3002"})]}),"\n",(0,t.jsx)(e.h2,{id:"local-build-\u306e\u624b\u9806",children:"local build \u306e\u624b\u9806"}),"\n",(0,t.jsx)(e.p,{children:"Git-bash \u7aef\u672b\u304b\u3089\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b\u3002"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"\u6700\u521d\u306b\u5c02\u7528\u306e miniconda \u74b0\u5883\u306b\u5165\u3063\u3066\u304b\u3089\u3001\u4f5c\u696d directory \u306b cd \u3059\u308b\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"conda activate docusaurus\r\ncd /c/my_prog/docusaurus/github_page\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsx)(e.li,{children:"\u8a18\u4e8b\u306e\u8ffd\u52a0\u3084\u7de8\u96c6\uff08blog \u3084 docs/UFO \u306a\u3069\u306e\u8a72\u5f53\u3059\u308b directory \u3067\u4f5c\u696d\uff09"}),"\n",(0,t.jsxs)(e.li,{children:["\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3002\r\n",(0,t.jsx)(e.code,{children:"cd /c/my_prog/docusaurus/github_page"})]}),"\n",(0,t.jsxs)(e.li,{children:["build \u3092\u5b9f\u884c\u3002\r\n",(0,t.jsx)(e.code,{children:"./make_local_build.sh"})]}),"\n",(0,t.jsx)(e.li,{children:"local PC \u306e Apache \u3067\u30b5\u30a4\u30c8\u3092\u78ba\u8a8d\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"local-build-\u7528-bash-script-1",children:"local build \u7528 bash script"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",metastring:'title="make_local_build.sh"',children:'#!/bin/bash\r\n# -*- coding: utf-8 -*-\r\n#\r\n# Local PC \u306e Apache \u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\r\n#\r\n# 2025-04-06\r\n#    - GitHub \u306e\u6700\u5927\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u5236\u9650\u306e\u5bfe\u7b56\u3092\u8ffd\u52a0\u3002\r\n#    - git add . \u306e\u9806\u756a\u3092\u30df\u30b9\u3063\u3066\u3044\u305f\u306e\u3067\u4fee\u6b63\r\n# 2025-03-30 \u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u3092\u524a\u9664\u3002Dodusaurus \u3067\u4f5c\u6210\u3059\u308b\u30b5\u30a4\u30c8\u306e\u5de6\u30d0\u30fc\u306e\u65b9\u5f0f\u3092\u5168\u9762\u7684\u306b\u5909\u66f4\u3057\u3066\u4e45\u3057\u3044\u3002\u3059\u3067\u306b\u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u306f\u4e0d\u8981\u3068\u306a\u3063\u305f\u3002\r\n# 2024-08-20 \u8ffd\u52a0\u3002\r\n# 2024-07-11 \u8ffd\u52a0\u3002\u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u3092\u8ffd\u52a0\u3002\r\n# 2024-07-06 \u8ffd\u52a0\u3002\r\n# 2024-07-04 \u4f5c\u6210\u3002AI \u652f\u63f4\u3002\r\n\r\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\r\ncommit_message="fix or add article"\r\n\r\n# \u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u306f\u3082\u3046\u4e0d\u8981\u3068\u306a\u3063\u305f\u30022025-03-23\r\n#\r\n# \u7591\u4f3c\u30ea\u30f3\u30af\u306e\u51e6\u7406\r\n# python solv_pseudo_symlink.py\r\n# if [ $? -ne 0 ]; then\r\n#   echo "FAIL: python solv_pseudo_symlink.py"\r\n#   exit 1\r\n# else\r\n#   echo "PASS: python solv_pseudo_symlink.py"\r\n# fi\r\n\r\n\r\n# \u3053\u306e\u30d6\u30ed\u30c3\u30af\u306f 2025-04-25 \u306b\u8ffd\u52a0\u3002./static/img \u306e\u5185\u90e8\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\r\n# "gh_" \u3067\u59cb\u307e\u3089\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308c\u3070\u3001\u51e6\u7406\u3092\u4e2d\u65ad\u3002\r\n#\r\n# \u52d5\u4f5c\u306e\u53b3\u5bc6\u5316\u3001\r\nset -euo pipefail\r\n\r\n# \u2460 \u5bfe\u8c61\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u56fa\u5b9a\r\nTARGET_DIR="./static/img"\r\n\r\n# \u2461 \u5b58\u5728\u30c1\u30a7\u30c3\u30af\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\r\nif [[ ! -d "$TARGET_DIR" ]]; then\r\n  echo "Error: directory \'$TARGET_DIR\' not found" >&2\r\n  exit 1\r\nfi\r\n\r\n# \u2462 \u30c1\u30a7\u30c3\u30af\u30d5\u30e9\u30b0\r\nfailed=false\r\n\r\n# \u2463 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306e\u5168\u30d5\u30a1\u30a4\u30eb\u30eb\u30fc\u30d7\uff08\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u542b\u307e\u306a\u3044\uff09\r\nfor filepath in "$TARGET_DIR"/*; do\r\n  # \u30d5\u30a1\u30a4\u30eb\u3067\u306a\u3051\u308c\u3070\u30b9\u30ad\u30c3\u30d7\r\n  [[ -f "$filepath" ]] || continue\r\n\r\n  filename=${filepath##*/}\r\n\r\n  # gh_ \u3067\u59cb\u307e\u3089\u306a\u3044\u5834\u5408\u306f\u51fa\u529b\uff06\u30d5\u30e9\u30b0\u7acb\u3066\r\n  if [[ "$filename" != gh_* ]]; then\r\n    echo "$filepath"\r\n    failed=true\r\n  fi\r\ndone\r\n\r\n# \u2464 \u7570\u5e38\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u3089 exit 1\r\nif [[ "$failed" == true ]]; then\r\n  echo "FAIL: filename pre-fix check (./static/img/)"\r\n  exit 1\r\nfi\r\n\r\n# \u2465 \u5168\u4ef6 OK \u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u7d99\u7d9a\u3002\r\necho "PASS: filename pre-fix check (./static/img/)"\r\n\r\n\r\n\r\n# \u5185\u90e8\u30ea\u30f3\u30af\u5148\u306e\u5b58\u5728\u30c1\u30a7\u30c3\u30af\r\npython md_link_check.py .\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: python md_link_check.py"\r\n  exit 1\r\nelse\r\n  echo "PASS: python md_link_check.py"\r\nfi\r\n\r\n\r\n# \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u89e3\u6790\r\nwhile getopts "m:" opt; do\r\n  case $opt in\r\n    m)\r\n      commit_message=$OPTARG\r\n      ;;\r\n    *)\r\n      echo "Usage: $0 [-m commit_message]"\r\n      exit 1\r\n      ;;\r\n  esac\r\ndone\r\n\r\n# git add . \u3092\u5b9f\u884c\r\ngit add .\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: git add ."\r\n  exit 1\r\nelse\r\n  echo "PASS: git add ."\r\nfi\r\n\r\n# \u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u3042\u308b\u304b\u3092\u78ba\u8a8d\r\nif git diff-index --quiet HEAD --; then\r\n  echo "No changes to commit."\r\n  exit 0\r\nfi\r\n\r\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u524a\u9664\u3059\u308b\r\nif [ -d ./build ]; then\r\n  rm -rf build\r\n  if [ $? -ne 0 ]; then\r\n    echo "FAIL: rm -rf build"\r\n    exit 1\r\n  else\r\n    echo "PASS: rm -rf build"\r\n  fi\r\nfi\r\n\r\n# git commit \u3092\u5b9f\u884c\r\ngit commit -m "$commit_message"\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: git commit"\r\n  exit 1\r\nelse\r\n  echo "PASS: git commit"\r\nfi\r\n\r\n# npm run build \u3092\u5b9f\u884c\r\nnpm run build\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: npm run build"\r\n  exit 1\r\nelse\r\n  echo "PASS: npm run build"\r\nfi\r\n\r\n# GitHub \u5bfe\u5fdc\u306e\u305f\u3081\u300150MB \u3092\u8d85\u3048\u308b\u30b5\u30a4\u30ba\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3002\u306a\u305c Docusaurus \u304c 50MB \u4ee5\u4e0a\u306e\u30b5\u30a4\u30ba\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u306e\u304b\u3001\u7406\u7531\u3082\u4f7f\u7528\u76ee\u7684\u3082\u4e0d\u660e\u3060\u304c\u3001local Apache \u3067\u306f\u524a\u9664\u3057\u3066\u3082\u554f\u984c\u306a\u3044\u3088\u3046\u306a\u306e\u3067 GitHub \u3067\u3082\u5927\u4e08\u592b\u3068\u4e88\u60f3\u3002\r\n\r\npython delete_size_over_files.py\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: delete_size_over_files.py"\r\n  exit 1\r\nelse\r\n  echo "PASS: delete_size_over_files.py"\r\nfi\r\n\r\n\r\n# date > last_date.text\r\ndate \'+%Y-%m-%d %H:%M:%S\' >last_update.text\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5c65\u6b74",children:"\u5c65\u6b74"}),"\n",(0,t.jsx)(e.p,{children:"(2025-05-14) \u6539\u5b9a"}),"\n",(0,t.jsx)(e.p,{children:"(2024-07-13) \u4f5c\u6210"})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>l,x:()=>c});var i=r(96540);const t={},s=i.createContext(t);function l(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);